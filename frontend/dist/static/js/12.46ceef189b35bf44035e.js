webpackJsonp([12],{eWgl:function(e,t){},wI3t:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("P9l9"),i=a("3lel"),s={data:function(){return{inputdate0:"",inputdate1:"",inputdate2:"",inputdate3:"",projectname:"",onwcopte:"",toTakeOver:"",publicPrivate:"",auditor:"",selectvalue:"0",invoicetype:"",examineData:!0,examineAdopt:!0,operationShow:!0,options:i.b,paccountFliter:i.d,dataList:{},currentPage:1,refuseId:"",loading:!0,dialogVisible:!1,publicYesNo:[{value:"",label:"全部"},{value:"0",label:"对公"},{value:"1",label:"对私"}],invoiceYesNo:[{value:"",label:"全部"},{value:"0",label:"是"},{value:"1",label:"否"}],invoiceFilter:{0:"是",1:"否"},modifyRefund:{reason:""},initModifyRefund:{reason:""},rules:{reason:[{required:!0,message:"请输入拒绝原因",trigger:"blur"}]}}},created:function(){this.getRefundDatalist()},methods:{getRefundDatalist:function(){var e=this,t=this.conditionDate();"0"===this.selectvalue?(this.operationShow=!0,this.examineData=!1):(this.operationShow=!1,this.examineData=!0),"2"===this.selectvalue?this.examineAdopt=!0:this.examineAdopt=!1,Object(l.F)(this.currentPage,t).then(function(t){console.log(t),e.loading=!1,e.dataList=t.data,console.log(e.dataList)}).catch(function(e){console.log(e)})},conditionDate:function(){return{params:{apply_date_0:this.inputdate0,apply_date_1:this.inputdate1,audit_date_0:this.inputdate2,audit_date_1:this.inputdate3,projectname:this.projectname,company:this.onwcopte,apply_man:this.toTakeOver,audit_man:this.auditor,is_invoice:this.invoicetype,fundtype:this.publicPrivate,state:this.selectvalue}}},handleCurrentChange:function(e){this.datalist=[],this.loading=!0,this.currentPage=e,this.getRefundDatalist()},AgreeRefundBtn:function(e){var t=this;this.$confirm("请确认是否审核通过该条数据？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(l.g)(e.id).then(function(e){0===e.data.code?(t.$message({type:"success",message:"操作成功!"}),t.getRefundDatalist()):t.$message({type:"error",message:e.detail})})}).catch(function(){console.log("cancel")})},RefuseRefundBtn:function(e){this.refuseId=e.id,this.dialogVisible=!0},subRefundRefuse:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return t.$message.error("提交有误，请检查提交项！"),!1;Object(l.V)(t.refuseId,t.modifyRefund).then(function(a){0===a.data.code?(t.modifyRefund=t.initModifyRefund,t.$refs[e].resetFields(),t.$message({type:"success",message:"操作成功"}),t.loading=!0,t.dialogVisible=!1,t.getRefundDatalist()):(t.dialogVisible=!1,t.$message(a.data.detail))}).catch(function(e){console.log(e)})})},searchBtn:function(){this.loading=!0,this.currentPage=1,this.getRefundDatalist()}},watch:{selectvalue:function(){this.datalist=[],this.loading=!0,this.currentPage=1,this.getRefundDatalist()},invoicetype:function(){this.datalist=[],this.loading=!0,this.currentPage=1,this.getRefundDatalist()},publicPrivate:function(){this.datalist=[],this.loading=!0,this.currentPage=1,this.getRefundDatalist()}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"refundExamine"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"input_search"},[a("div",{staticClass:"search marginvi"},[a("label",{staticClass:"labeltext"},[e._v("申请日期")]),e._v(" "),a("el-date-picker",{attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",size:"medium",type:"date",placeholder:"选择日期"},model:{value:e.inputdate0,callback:function(t){e.inputdate0=t},expression:"inputdate0"}}),e._v(" "),a("span",{staticClass:"line"},[e._v(" — ")]),e._v(" "),a("el-date-picker",{attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",size:"medium",type:"date",placeholder:"选择日期"},model:{value:e.inputdate1,callback:function(t){e.inputdate1=t},expression:"inputdate1"}})],1),e._v(" "),a("div",{staticClass:"search marginvi"},[a("label",{staticClass:"labeltext"},[e._v("项目名称")]),e._v(" "),a("el-input",{attrs:{size:"medium"},model:{value:e.projectname,callback:function(t){e.projectname=t},expression:"projectname"}})],1),e._v(" "),a("div",{staticClass:"search"},[a("label",{staticClass:"labeltext"},[e._v("甲方公司名称")]),e._v(" "),a("el-input",{attrs:{size:"medium"},model:{value:e.onwcopte,callback:function(t){e.onwcopte=t},expression:"onwcopte"}})],1),e._v(" "),a("div",{staticClass:"search"},[a("label",{staticClass:"labeltext"},[e._v("商务对接人")]),e._v(" "),a("el-input",{attrs:{size:"medium"},model:{value:e.toTakeOver,callback:function(t){e.toTakeOver=t},expression:"toTakeOver"}})],1)])])],1),e._v(" "),a("el-row",{staticClass:"row_top"},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"input_search"},[a("div",{staticClass:"search marginvi"},[a("label",{staticClass:"labeltext"},[e._v("审核日期")]),e._v(" "),a("el-date-picker",{attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",size:"medium",type:"date",placeholder:"选择日期"},model:{value:e.inputdate2,callback:function(t){e.inputdate2=t},expression:"inputdate2"}}),e._v(" "),a("span",{staticClass:"line"},[e._v(" — ")]),e._v(" "),a("el-date-picker",{attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",size:"medium",type:"date",placeholder:"选择日期"},model:{value:e.inputdate3,callback:function(t){e.inputdate3=t},expression:"inputdate3"}})],1),e._v(" "),a("div",{staticClass:"search"},[a("label",{staticClass:"labeltext"},[e._v("审核人")]),e._v(" "),a("el-input",{attrs:{size:"medium"},model:{value:e.auditor,callback:function(t){e.auditor=t},expression:"auditor"}})],1),e._v(" "),a("div",{staticClass:"search marginvi"},[a("label",{staticClass:"labeltext"},[e._v("是否开票")]),e._v(" "),a("el-select",{attrs:{size:"medium",placeholder:"请选择"},model:{value:e.invoicetype,callback:function(t){e.invoicetype=t},expression:"invoicetype"}},e._l(e.invoiceYesNo,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("div",{staticClass:"search marginvi"},[a("label",{staticClass:"labeltext"},[e._v("对公对私")]),e._v(" "),a("el-select",{attrs:{size:"medium",placeholder:"请选择"},model:{value:e.publicPrivate,callback:function(t){e.publicPrivate=t},expression:"publicPrivate"}},e._l(e.publicYesNo,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)])])],1),e._v(" "),a("el-row",{staticClass:"row_top"},[a("el-col",{attrs:{span:20}},[a("div",{staticClass:"flex_default"},[a("div",{staticClass:"select"},[a("label",{staticClass:"label"},[e._v("审核状态")]),e._v(" "),a("el-select",{attrs:{size:"medium",placeholder:"请选择"},model:{value:e.selectvalue,callback:function(t){e.selectvalue=t},expression:"selectvalue"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)])]),e._v(" "),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"flexright"},[a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.searchBtn}},[e._v("搜索")])],1)])],1),e._v(" "),a("el-row",{staticClass:"row_top row_bottom"},[a("div",{staticClass:"table-list"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.dataList.results}},[a("el-table-column",{attrs:{label:"日期",prop:"apply_date",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"项目名称",prop:"projectname"}}),e._v(" "),a("el-table-column",{attrs:{label:"甲方公司名称",prop:"company"}}),e._v(" "),a("el-table-column",{attrs:{label:"平台名称",prop:"platname",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"对公对私"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.paccountFliter[t.row.fundtype]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"是否已开票"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.invoiceFilter[t.row.is_invoice]))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"预付款金额",prop:"inprest",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"已消耗金额",prop:"consume_sum"}}),e._v(" "),a("el-table-column",{attrs:{label:"退款金额",prop:"refund_rec"}}),e._v(" "),a("el-table-column",{attrs:{label:"签约公司",prop:"contract_company"}}),e._v(" "),a("el-table-column",{attrs:{label:"开户行",prop:"bank"}}),e._v("、\n        "),a("el-table-column",{attrs:{label:"银行账号",prop:"bank_account"}}),e._v(" "),a("el-table-column",{attrs:{label:"退款原因",prop:"refund_reason"}}),e._v(" "),a("el-table-column",{attrs:{label:"商务对接人",prop:"apply_man"}}),e._v(" "),e.examineData?a("el-table-column",{key:Math.random(),attrs:{label:"审核人",prop:"audit_man"}}):e._e(),e._v(" "),e.examineData?a("el-table-column",{key:Math.random(),attrs:{label:"审核时间",prop:"audit_date"}}):e._e(),e._v(" "),e.examineAdopt?a("el-table-column",{key:Math.random(),attrs:{label:"拒绝原因",prop:"audit_refused_reason"}}):e._e(),e._v(" "),e.operationShow?a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"operation_button"},[a("div",{staticClass:"op_button_padding"},[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.AgreeRefundBtn(t.row)}}},[e._v("同意")])],1),e._v(" "),a("div",{staticClass:"op_button_padding"},[a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(a){e.RefuseRefundBtn(t.row)}}},[e._v("拒绝")])],1)])]}}])}):e._e()],1)],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","page-size":10,"current-page":this.currentPage,layout:"prev, pager, next, total, jumper",total:this.dataList.recordCount},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"拒绝原因",visible:e.dialogVisible,width:"35%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"form_table"},[a("el-form",{ref:"modifyRefund",staticClass:"demo-ruleForm",attrs:{model:e.modifyRefund,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"拒绝原因",prop:"reason"}},[a("el-input",{attrs:{type:"textarea",size:"medium"},model:{value:e.modifyRefund.reason,callback:function(t){e.$set(e.modifyRefund,"reason",t)},expression:"modifyRefund.reason"}})],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.subRefundRefuse("modifyRefund")}}},[e._v("确 定")])],1)])],1)],1)},staticRenderFns:[]};var o=a("VU/8")(s,n,!1,function(e){a("eWgl")},null,null);t.default=o.exports}});
//# sourceMappingURL=12.46ceef189b35bf44035e.js.map